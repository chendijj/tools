# 🗂️ 局域网文件分享工具

一个简洁高效的局域网文件分享和文本编辑工具，基于 Python Flask 开发，支持文件上传、在线编辑、临时存储等功能。

## ✨ 功能特性

### 核心功能

- **📤 文件上传分享** - 支持拖拽上传多种文件格式
- **📝 在线文本编辑** - 创建和编辑文本文件
- **👁️ 文件预览** - 支持文本和图片文件在线预览
- **⬇️ 文件下载** - 一键下载分享的文件
- **🗑️ 文件管理** - 删除、批量操作等管理功能
- **🧹 自动清理** - 定时清理过期文件（默认 24 小时）

### 用户体验

- **🎨 简洁界面** - 采用桌面应用风格，简洁朴素的设计
- **📱 移动友好** - 响应式设计，完美适配手机和平板
- **📱 二维码分享** - 生成二维码供移动设备快速访问
- **🚀 即开即用** - 无需注册登录，下载即用
- **🌐 局域网访问** - 同网段设备可直接访问
- **💾 临时存储** - 文件自动过期，保护隐私

## 🛠️ 技术栈

### 后端

- **Python 3.6+** - 主要开发语言
- **Flask** - 轻量级 Web 框架
- **Werkzeug** - 文件上传处理
- **APScheduler** - 定时任务调度
- **QRCode** - 二维码生成

### 前端

- **HTML5 + CSS3** - 简洁的桌面应用风格界面
- **CSS 变量系统** - 统一的设计语言和颜色方案
- **Vanilla JavaScript** - 原生 JS，无依赖
- **响应式设计** - 适配各种设备

## 📦 快速开始

### 环境要求

- Python 3.6 或更高版本
- Windows/macOS/Linux 系统

### 安装步骤

#### Windows 用户（推荐）

1. 下载项目文件
2. 双击运行 `start.bat`
3. 首次运行会自动安装依赖
4. 等待服务启动完成

#### 手动安装

```bash
# 1. 克隆或下载项目
git clone <repository-url>
cd file-share-tool

# 2. 创建虚拟环境（推荐）
python -m venv venv

# 3. 激活虚拟环境
# Windows:
venv\Scripts\activate
# macOS/Linux:
source venv/bin/activate

# 4. 安装依赖
pip install -r requirements.txt

# 5. 启动服务
python start.py
```

### 访问服务

- **本地访问**: http://localhost:5000
- **局域网访问**: http://[你的 IP]:5000
- **移动设备**: 扫描启动时显示的二维码

## 📁 项目结构

```
file-share-tool/
├── app.py                 # Flask应用主文件
├── start.py              # 启动脚本
├── start.bat             # Windows启动脚本
├── config.py             # 配置文件
├── requirements.txt      # Python依赖
├── README.md            # 项目说明
├── TODO.md              # 开发任务清单
├── templates/           # HTML模板
│   ├── base.html        # 基础模板
│   └── index.html       # 主页面
├── static/              # 静态文件
│   ├── css/
│   │   └── style.css    # 样式文件
│   ├── js/
│   │   └── main.js      # JavaScript功能
│   └── uploads/         # 文件存储目录
└── utils/               # 工具模块
    ├── __init__.py
    ├── file_manager.py  # 文件管理
    └── cleanup.py       # 清理任务
```

## 🔧 配置说明

### 主要配置项（config.py）

```python
# 文件上传限制
MAX_CONTENT_LENGTH = 100 * 1024 * 1024  # 100MB

# 文件过期时间
FILE_EXPIRE_HOURS = 24  # 24小时

# 服务器配置
HOST = '0.0.0.0'  # 允许局域网访问
PORT = 5000       # 默认端口

# 清理任务间隔
CLEANUP_INTERVAL_MINUTES = 60  # 每60分钟清理一次
```

### 支持的文件类型

- **文本文件**: txt, md, py, js, html, css, json, xml, csv, log
- **文档文件**: pdf, doc, docx, xls, xlsx, ppt, pptx
- **图片文件**: png, jpg, jpeg, gif, bmp, svg, webp
- **压缩文件**: zip, rar, 7z, tar, gz
- **媒体文件**: mp3, mp4, avi, mov, wav

## 🚀 使用指南

### 文件上传

1. 拖拽文件到上传区域，或点击选择文件
2. 支持多文件同时上传
3. 上传完成后文件会出现在文件列表中

### 文本编辑

1. 在文本编辑器中输入内容
2. 设置文件名（自动添加.txt 扩展名）
3. 点击"保存"按钮保存为文件

### 文件管理

- **预览**: 点击"预览"按钮查看文本或图片文件
- **下载**: 点击"下载"按钮下载文件
- **删除**: 点击"删除"按钮删除文件
- **批量操作**: 使用"清空所有"按钮删除所有文件

### 局域网分享

1. 启动服务后，记录显示的局域网地址
2. 其他设备通过该地址访问
3. 移动设备可扫描二维码快速访问

## 🔒 安全说明

本工具设计用于局域网内临时文件分享，具有以下特点：

- **无用户认证** - 适合信任环境使用
- **临时存储** - 文件自动过期删除
- **局域网限制** - 仅局域网内可访问
- **文件大小限制** - 单文件最大 100MB

⚠️ **注意**: 请勿在公网环境使用，不适合存储敏感文件。

## 🐛 故障排除

### 常见问题

**Q: 启动时提示端口被占用**
A: 程序会自动尝试其他端口（5001-5009），或手动修改 config.py 中的 PORT 配置

**Q: 其他设备无法访问**
A: 检查防火墙设置，确保允许 Python 程序通过防火墙

**Q: 文件上传失败**
A: 检查文件大小是否超过 100MB 限制，或文件类型是否支持

**Q: 依赖安装失败**
A: 尝试使用国内镜像：`pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/`

### 日志查看

程序运行时会在控制台显示详细日志，包括：

- 文件上传/下载记录
- 清理任务执行情况
- 错误信息

## 📄 许可证

本项目采用 MIT 许可证，详见 LICENSE 文件。

## 🤝 贡献

欢迎提交 Issue 和 Pull Request 来改进这个项目！

## 📞 支持

如果您在使用过程中遇到问题，请：

1. 查看本文档的故障排除部分
2. 检查控制台错误信息
3. 提交 Issue 描述问题

---

**享受简单高效的文件分享体验！** 🎉
